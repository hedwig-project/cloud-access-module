{
  "swagger": "2.0",
  "info": {
    "description": "Hedwig Access Module microservice.",
    "version": "0.3.0",
    "title": "Hedwig Access Module",
    "license": {
      "name": "MIT",
      "url": "https://github.com/hedwig-project/cloud-access-module/blob/master/LICENSE"
    }
  },
  "host": "hedwig-project.github.io",
  "basePath": "/api",
  "tags": [
    {
      "name": "alarm"
    },
    {
      "name": "controller"
    },
    {
      "name": "gate"
    },
    {
      "name": "humidity"
    },
    {
      "name": "presence"
    },
    {
      "name": "relay"
    },
    {
      "name": "temperature"
    }
  ],
  "schemes": [
    "http",
    "https"
  ],
  "paths": {
    "/alarm": {
      "get": {
        "tags": [
          "alarm"
        ],
        "summary": "Get alarm data records",
        "description": "Get alarm data records. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Alarm"
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "alarm"
        ],
        "summary": "Create a new alarm data record",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Alarm data object",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "controllerId",
                "active"
              ],
              "properties": {
                "controllerId": {
                  "type": "string"
                },
                "time": {
                  "type": "string",
                  "format": "date-time"
                },
                "active": {
                  "type": "boolean"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/Alarm"
            }
          },
          "500": {
            "description": "ValidationError"
          }
        }
      }
    },
    "/controller/{controllerId}/alarm": {
      "get": {
        "tags": [
          "controller"
        ],
        "summary": "Get alarm data records for a specific controller",
        "description": "Get alarm data records for a specific controller. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "controllerId",
            "description": "Local controller (Morpheus) ID",
            "required": true,
            "schema": "string"
          },
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Alarm"
              }
            }
          }
        }
      }
    },
    "/controller/{controllerId}/gate": {
      "get": {
        "tags": [
          "controller"
        ],
        "summary": "Get gate data records for a specific controller",
        "description": "Get gate data records for a specific controller. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "controllerId",
            "description": "Local controller (Morpheus) ID",
            "required": true,
            "schema": "string"
          },
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Gate"
              }
            }
          }
        }
      }
    },
    "/controller/{controllerId}/humidity": {
      "get": {
        "tags": [
          "controller"
        ],
        "summary": "Get humidity data records for a specific controller",
        "description": "Get humidity data records for a specific controller. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "controllerId",
            "description": "Local controller (Morpheus) ID",
            "required": true,
            "schema": "string"
          },
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Humidity"
              }
            }
          }
        }
      }
    },
    "/controller/{controllerId}/presence": {
      "get": {
        "tags": [
          "controller"
        ],
        "summary": "Get presence data records for a specific controller",
        "description": "Get presence data records for a specific controller. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "controllerId",
            "description": "Local controller (Morpheus) ID",
            "required": true,
            "schema": "string"
          },
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Presence"
              }
            }
          }
        }
      }
    },
    "/controller/{controllerId}/relay": {
      "get": {
        "tags": [
          "controller"
        ],
        "summary": "Get relay data records for a specific controller",
        "description": "Get relay data records for a specific controller. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "controllerId",
            "description": "Local controller (Morpheus) ID",
            "required": true,
            "schema": "string"
          },
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Relay"
              }
            }
          }
        }
      }
    },
    "/controller/{controllerId}/temperature": {
      "get": {
        "tags": [
          "controller"
        ],
        "summary": "Get temperature data records for a specific controller",
        "description": "Get temperature data records for a specific controller. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "controllerId",
            "description": "Local controller (Morpheus) ID",
            "required": true,
            "schema": "string"
          },
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Temperature"
              }
            }
          }
        }
      }
    },
    "/gate": {
      "get": {
        "tags": [
          "gate"
        ],
        "summary": "Get gate data records",
        "description": "Get gate data records. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Gate"
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "gate"
        ],
        "summary": "Create a new gate data record",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Gate data object",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "controllerId",
                "open"
              ],
              "properties": {
                "controllerId": {
                  "type": "string"
                },
                "time": {
                  "type": "string",
                  "format": "date-time"
                },
                "open": {
                  "type": "boolean"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/Gate"
            }
          },
          "500": {
            "description": "ValidationError"
          }
        }
      }
    },
    "/humidity": {
      "get": {
        "tags": [
          "humidity"
        ],
        "summary": "Get humidity data records",
        "description": "Get humidity data records. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Humidity"
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "humidity"
        ],
        "summary": "Create a new humidity data record",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Humidity data object",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "controllerId",
                "humidity"
              ],
              "properties": {
                "controllerId": {
                  "type": "string"
                },
                "time": {
                  "type": "string",
                  "format": "date-time"
                },
                "humidity": {
                  "type": "number",
                  "format": "float"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/Humidity"
            }
          },
          "500": {
            "description": "ValidationError"
          }
        }
      }
    },
    "/presence": {
      "get": {
        "tags": [
          "presence"
        ],
        "summary": "Get presence data records",
        "description": "Get presence data records. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Presence"
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "presence"
        ],
        "summary": "Create a new presence data record",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Presence data object",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "controllerId",
                "presence"
              ],
              "properties": {
                "controllerId": {
                  "type": "string"
                },
                "time": {
                  "type": "string",
                  "format": "date-time"
                },
                "presence": {
                  "type": "boolean"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/Presence"
            }
          },
          "500": {
            "description": "ValidationError"
          }
        }
      }
    },
    "/relay": {
      "get": {
        "tags": [
          "relay"
        ],
        "summary": "Get relay data records",
        "description": "Get relay data records. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Relay"
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "relay"
        ],
        "summary": "Create a new relay data record",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Relay data object",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "controllerId",
                "name",
                "open"
              ],
              "properties": {
                "controllerId": {
                  "type": "string"
                },
                "time": {
                  "type": "string",
                  "format": "date-time"
                },
                "name": {
                  "type": "string"
                },
                "open": {
                  "type": "boolean"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/Relay"
            }
          },
          "500": {
            "description": "ValidationError"
          }
        }
      }
    },
    "/temperature": {
      "get": {
        "tags": [
          "temperature"
        ],
        "summary": "Get temperature data records",
        "description": "Get temperature data records. Limited to 50 most recent if no time limit is set.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "from",
            "description": "Start date (YYYY-MM-dd). Search is done considering 00:00:00 as start hour.",
            "type": "string"
          },
          {
            "in": "query",
            "name": "to",
            "description": "Final date (YYYY-MM-dd). Search is done considering 23:59:59 as final hour.",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Temperature"
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "temperature"
        ],
        "summary": "Create a new temperature data record",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Temperature data object",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "controllerId",
                "temperature"
              ],
              "properties": {
                "controllerId": {
                  "type": "string"
                },
                "time": {
                  "type": "string",
                  "format": "date-time"
                },
                "temperature": {
                  "type": "number",
                  "format": "float"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/Temperature"
            }
          },
          "500": {
            "description": "ValidationError"
          }
        }
      }
    }
  },
  "definitions": {
    "Alarm": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "format": "binary"
        },
        "controllerId": {
          "type": "string"
        },
        "time": {
          "type": "string",
          "format": "date-time"
        },
        "active": {
          "type": "boolean"
        },
        "timeSinceLastChange": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "Gate": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "format": "binary"
        },
        "controllerId": {
          "type": "string"
        },
        "time": {
          "type": "string",
          "format": "date-time"
        },
        "open": {
          "type": "boolean"
        }
      }
    },
    "Humidity": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "format": "binary"
        },
        "controllerId": {
          "type": "string"
        },
        "time": {
          "type": "string",
          "format": "date-time"
        },
        "humidity": {
          "type": "number",
          "format": "float"
        }
      }
    },
    "Presence": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "format": "binary"
        },
        "controllerId": {
          "type": "string"
        },
        "time": {
          "type": "string",
          "format": "date-time"
        },
        "presence": {
          "type": "boolean"
        }
      }
    },
    "Relay": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "format": "binary"
        },
        "controllerId": {
          "type": "string"
        },
        "time": {
          "type": "string",
          "format": "date-time"
        },
        "name": {
          "type": "string"
        },
        "open": {
          "type": "boolean"
        }
      }
    },
    "Temperature": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "format": "binary"
        },
        "controllerId": {
          "type": "string"
        },
        "time": {
          "type": "string",
          "format": "date-time"
        },
        "temperature": {
          "type": "number",
          "format": "float"
        }
      }
    }
  }
}
